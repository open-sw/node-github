<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: api/v3.0.0/index.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: api/v3.0.0/index.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 *  class Github
 * 
 *  A Node.JS module, which provides an object oriented wrapper for the GitHub v3 API.
 * 
 *  Copyright 2012 Ajax.org Services B.V.
 *
 *  This product includes software developed by
 *  Ajax.org Services B.V. (http://www.ajax.org/).
 *
 *  Author: Mike de Boer &lt;mike@ajax.org>
 **/

"use strict";

var Fs = require("fs");
var Util = require("./../../util");
var error = require("./../../error");

/**
 * @module api
 * @constructor
 **/
var GithubHandler = module.exports = function(client) {
    this.client = client;
    this.routes = JSON.parse(Fs.readFileSync(__dirname + "/routes.json", "utf8"));
};

GithubHandler.prototype = {
    sendError: function(err, msg, block, callback) {
        Util.log(err, block, msg.user, "error");
        if (typeof err == "string")
            err = new error.InternalServerError(err);
        if (callback)
            callback(err);
    },
    handler: function(msg, block, callback) {
        var self = this;
        this.client.httpSend(msg, block, function(err, res) {
            if (err)
                return self.sendError(err, msg, null, callback);

            var ret;
            try {
                ret = res.data &amp;&amp; JSON.parse(res.data);
            }
            catch (ex) {
                if (callback)
                    callback(new error.InternalServerError(ex.message), res);
                return;
            }

            if (!ret) {
                ret = {};
            }

            ret.meta = {};
            self.client.constants.responseHeaders.forEach(function(header) {
                if (res.headers[header]) {
                    ret.meta[header] = res.headers[header];
                }
            });

            if (callback)
                callback(null, ret);
        });
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-authorization.html">authorization</a></li><li><a href="module-events.html">events</a></li><li><a href="module-gists.html">gists</a></li><li><a href="module-gitdata.html">gitdata</a></li><li><a href="module-github.html">github</a></li><li><a href="module-issues.html">issues</a></li><li><a href="module-markdown.html">markdown</a></li><li><a href="module-orgs.html">orgs</a></li><li><a href="module-pullRequests.html">pullRequests</a></li><li><a href="module-repos.html">repos</a></li><li><a href="module-search.html">search</a></li><li><a href="module-statuses.html">statuses</a></li><li><a href="module-user.html">user</a></li></ul><h3>Classes</h3><ul><li><a href="api.html">api</a></li><li><a href="module-github.Client.html">Client</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha3</a> on Tue Jan 21 2014 21:21:39 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
